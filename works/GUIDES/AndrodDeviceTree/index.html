<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
		
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		
		<noscript><a rel="nofollow" href="http://ws-in.amazon-adsystem.com/widgets/q?rt=tf_mfw&ServiceVersion=20070822&MarketPlace=IN&ID=V20070822%2FIN%2Fdevelwork-21%2F8001%2F69019311-2acc-46e5-ac4b-271b8015a2ba&Operation=NoScript"></a></noscript>
		
		<meta name="google-site-verification" content="qaJGD11lXBFx-G_iNkaZche1a2sMGvJIRPWA6nbl4iE" />
		
        <meta name="description" content="Developers@Work Page">
		
		<link rel="icon" href="https://goo.gl/47oCKc" type="image/png" />
		
		<title id="title">[GUIDE]Build Android Device Tree - Developers@Work</title>
		
		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        
        <!-- Font Links -->
		<link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet"/>
		<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet"/>
		
		<!-- BootStrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		
		<!-- Global Includes -->
		<link rel="stylesheet" href="../../../globalIncludes/style.css">
		<script type="text/javascript"src="../../../globalIncludes/script.js"></script>
		<link rel="stylesheet" href="../../../globalIncludes/FixedHeaderFooterStyles.css">
		
		<!--  Source Files GitHub -->
		<script type="text/javascript"src="https://rawgit.com/DevelopersWork/DevelopersWork.github.io/YouTube-Projects/javaScript/Autho.js"></script>
		<script type="text/javascript"src="https://rawgit.com/DevelopersWork/DevelopersWork.github.io/YouTube-Projects/javaScript/Ads/AdScript.js"></script>
		
		<!-- Local Includes -->
		<script type="text/javascript"src="script.js"></script>
		<link rel="stylesheet" href="style.css">
		
	</head>
	
	<body style="background-image:url('');">
	
		
		<div id="navigationBar">
		
			<nav class="navbar navbar-default navbar-fixed-top navbar-static-top" id="navbar-default">
			<!-- Brand and toggle get grouped for better mobile display -->
			
				<div class="navbar-header" id="navbar-header">
					<a class="navbar-brand" id="navbar-brand" href="#Developers@Work"r>
						<img src="../../../globalIncludes/DevelopersWork.png" alt="Developers@Work">
					</a>
				</div>
				
				<div class="container-fluid">
				<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					
						<ul class="nav navbar-nav navbar-left">
							<li ><a href="../../../">HOME</a></li>
							<li><a href="../../../contact">CONTACT</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">WORKS<span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li><a href="../../liveSubscriberCount" >Live Subscriber Count</a></li>
									<li role="separator" class="divider"></li>
									<li class="dropdown-submenu">
										<a class="test" tabindex="-1" href="#/GUIDES">GUIDES<span class="caret"></span></a>
										<ul class="dropdown-menu">
											<li><a tabindex="-1" href="#Androd_Device_Tree_GUIDE">Android Device Tree Build</a></li>
										</ul>
									</li>
							<!--	<li><a href="works/">Another action</a></li>
									<li><a href="#">Something else here</a></li>
									<li role="separator" class="divider"></li>
									<li><a href="#">Separated link</a></li>  
									<li class="dropdown-submenu">
										<a class="test" tabindex="-1" href="#">New dropdown <span class="caret"></span></a>
										<ul class="dropdown-menu">
											<li><a tabindex="-1" href="#">2nd level dropdown</a></li>
											<li class="dropdown-submenu">
												<a class="test" href="#">Another dropdown <span class="caret"></span></a>
												<ul class="dropdown-menu">
													<li><a href="#">3rd level dropdown</a></li>
												</ul>
											</li>
										</ul>
									</li>		-->
								</ul>
							</li>
						</ul>

						<ul class="nav navbar-nav navbar-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">SHOPS<span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li><a href="http://shop.spreadshirt.com/DevelopersWork" target="_blank">HOODIES@SPREADSHIRT</a></li>
								</ul>
							</li>
							<li><a href="../../../support">SUPPORT</a></li>
							<li><a href="../../../about">ABOUT</a></li>
						</ul>
						
					</div><!-- /.navbar-collapse -->
				</div><!-- /.container-fluid -->
				
			</nav>
		</div><br><br><br>
		
		<div id="leaderboard728x90Ad" align="center" style="float:">
			AD!
		</div>
		
		<div style="color:Teal" align="left">
			<code>Hello Guys.....</code>
			<img src="index_files/emoji-7.png" alt="emoji" width="50" height="50" align=""/>
			<img src="index_files/emoji-7.png" alt="emoji" width="50" height="50" align=""/>
			<img src="index_files/emoji-7.png" alt="emoji" width="50" height="50" align=""/>
		</div>
		
		<div align="right">
			<h1 align="center">This is "
				<code style="color:teal;">Developers@Work</code> "....
				<img src="index_files/emoji-6.png" alt="emoji" width="50" height="50" align=""/>
			</h1>
		</div>
		
		<div align="center">
			<code align="center">I'm here to Explain You!!! About</code>
			<h1 style="color:tEAL;font-weight:bold;" align="center">CODING ANDROID DEVICE TREE</h1>
			<img src="index_files/tree.jpg" alt="Android Tree" width="1000" height="" align="center"/><br><br>
		</div>
		
		<div style="border:3px solid green;display:inline-block;">
			<h2>Let's start with tools we need</h2><br><br>
			<code style="color:MediumVioletRed;">Ubuntu-64bit OS</code> with full android development tools installed.<br><br>More than 
			<code style="color:MediumVioletRed;">100-GB</code> of Hard Disk Space.<br><br>
			<code style="color:MediumVioletRed;">Internet Connection</code> for downloading some data.<br><br>
			<code style="color:MediumVioletRed;">Rooted Android Mobile</code> to which you want to make a 
			<code style="color:MediumVioletRed;">Custom Rom</code> .<br><br>
			<code style="color:MediumVioletRed;">Source code</code> already downloaded of Rom which you are going to build.If you want more about Downloading Source code-Xda link 
			<a href="http://forum.xda-developers.com/chef-central/android/guide-android-rom-development-t2814763">
				<code>Here</code>
			</a><br><br>Last but not least 
			<code style="color:MediumVioletRed;">Patience</code>.<br><br>I'am making device tree of 
			<code style="color:DeepSkyBlue;">CyanogenMod 11</code> for the device 
			<code style="color:DeepSkyBlue;">Celkon A401</code><br><br>
		</div>
		
		<div id="square250x250Ad" align="center" style="float:right">
			AD!
		</div>
		<br>
		
		
		<div>
			<h1 style="color:DarkSlateGray;">Follow these Steps :</h1>
			
			<div>
				<h2 style="color:FireBrick;">1) Get your Stock - boot.img,recovery.img</h2>
				1)You can use adb pull command if you know your Device Partition Mount Points.Video Below explain Backup Partitions using Adb
				<a href="https://youtu.be/mNiA9ws0gJM">Video On ADB</a>
				2)Use apps from playstore to backup.I suggest Flashify app-Playstore link 
				<a href="https://youtu.be/gusbyq1e6BM">Video On SpredTrum</a>
				3)Extract these files from your stock firmware.Video Below explain Extract files for Spreadtrum firmware
				<a id="button1" href="javascript:showhide('1')">
					<button>Show</button>
				</a>
				<div id="1" style="display:none;">
					<img src="index_files/files.png" alt="Screenshot" width="1000" height="" align=""/>
				</div>
			</div><hr/>
			
			<div>
				<h2 style="color:FireBrick;">2) Get your Device Information</h2>
				* Download any Root browser app and goto /system and copy build.prop to pc where we copied other files.
				<a id="button2.1" href="javascript:showhide('2.1')">
					<button>Show</button>
				</a>
				<div id="2.1" style="display:none;">
					<img src="index_files/files2.png" alt="Screenshot" width="1000" height="" align="">
				</div>
				Now open build.prop using your text editor.
				<a id="button2.2" href="javascript:showhide('2.2')">
					<button>Show</button>
				</a>
				<div id="2.2" style="display:none;">
					<img src="index_files/prop.png" alt="Screenshot" width="1000" height="" align="">
				</div>
				Check these <code>ro.product.brand=<br>ro.product.device=</code>
				<a id="button2.3" href="javascript:showhide('2.3')">
					<button>Show</button>
				</a>
				<div id="2.3" style="display:none;">
					<img src="index_files/info.png" alt="Screenshot" width="1000" height="" align="">
				</div>
			</div><hr/>
			
		<div>
			<h2 style="color:FireBrick;">3) Extract recovery.img using mkvendor.sh</h2>
			Open Terminal using <code >"Ctrl+Alt+T"</code> keyboard keys
			<a id="button3.1" href="javascript:showhide('3.1')"><button>Show</button></a>
			<div id="3.1" style="display:none;"></div>
			Here my repo folder is named as cm11
			<a id="button3.2" href="javascript:showhide('3.2')"><button>Show</button></a>
			<div id="3.2" style="display:none;"></div>
			Type in terminal <code >"cd (Your repo folder location)"</code> and press Enter.
			<a id="button3.3" href="javascript:showhide('3.3')"><button>Show</button></a>
			<div id="3.3" style="display:none;"></div>
			Before starting remove old output product files type this in terminal <code >"make clean"</code> and press Enter.
			<a id="button3.4" href="javascript:showhide('3.4')"><button>Show</button></a>
			<div id="3.4" style="display:none;"></div>
			Remove old output files type this in terminal <code >"make clobber"</code> and press Enter.
			<a id="button3.5" href="javascript:showhide('3.5')"><button>Show</button></a>
			<div id="3.5" style="display:none;"></div>
			Update your repo files so type this in terminal <code >"repo sync"</code> and press Enter.
			<a id="button3.6" href="javascript:showhide('3.6')"><button>Show</button></a>
			<div id="3.6" style="display:none;"></div>
			Now type <code >"./build/tools/device/mkvendor.sh (brand) (device) (recovery.img location)"</code> in terminal and press Enter
			<a id="button3.7" href="javascript:showhide('3.7')"><button>Show</button></a>
			<div id="3.7" style="display:none;"></div>
			If you get this error <code >"unpackbootimg not found. Is your android build environment set up and have the host tools been built?"</code>. Then follow the steps below or just Continue
			<a id="button3.8" href="javascript:showhide('3.8')"><button>Show</button></a>
			<div id="3.8" style="display:none;">
			<a id="button3.8.1" href="javascript:showhide('3.8.1')"><button>Show</button></a>
			<div id="3.8.1" style="display:none;"></div>
			Now type in terminal <code >". build/envsetup.sh"</code> and press Enter.
			<a id="button3.8.2" href="javascript:showhide('3.8.2')"><button>Show</button></a>
			<div id="3.8.2" style="display:none;"></div>
			Next type <code >"make -j4 otatools"</code> and press Enter.
			<a id="button3.8.3" href="javascript:showhide('3.8.3')"><button>Show</button></a>
			<div id="3.8.3" style="display:none;"></div>
			Even then the problem haven't resolved then next type this command <code >"cp $HOME/repo_folder/out/host/linux-x86/bin/unpackbootimg $HOME/bin"</code> and press Enter.
			<a id="button3.8.4" href="javascript:showhide('3.8.4')"><button>Show</button></a>
			<div id="3.8.4" style="display:none;"></div>
			Now try this command to check unpackbootimg was detected <code >"which unpackbootimg"</code> and press Enter.
			<a id="button3.8.5" href="javascript:showhide('3.8.5')"><button>Show</button></a>
			<div id="3.8.5" style="display:none;"></div>
			Now try this command again <code >"./build/tools/device/mkvendor.sh (brand) (device) (recovery.img location)"</code> and press Enter.
			<a id="button3.8.6" href="javascript:showhide('3.8.6')"><button>Show</button></a>
			<div id="3.8.6" style="display:none;"></div>
			</div>
		</div><hr/>
			
		<div>
			<h2 style="color:FireBrick;">4) Check All Files Extracted correctly</h2>
			Let's check was all files set correct in 
			<code >device/brand/codename</code>
			<a id="button" href="javascript:showhide('4')"><button>Show</button></a>
			<div id="4" style="display:none;">Let's check was all files set correct in <code >device/brand/codename</code><img src="index_files/extract.png" alt="Screenshot" width="1000" height="" align=""><br><br>
			</div>
		</div><hr/>
		
		<div>
			<h2 style="color:FireBrick;">5) Making Device Tree Recognised in setup</h2>
			We need to create a new file 
			<code >vendorsetup.sh</code>
			Edit it with a text editor 
			<code >add_lunch_combo cm_codename-eng</code>
			.This will add your device in lunch options, and will be initialized by 
			<code >build/envsetup.sh</code>
			<a id="button" href="javascript:showhide('5')"><button>Show</button></a>
   <div id="5" style="display:none;"><p style="">We need to create a new file <code >vendorsetup.sh</code><img src="index_files/vendorsetup.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Edit it with a text editor <code >add_lunch_combo cm_codename-eng</code> .This will add your device in lunch options, and will be initialized by <code >build/envsetup.sh</code><img src="index_files/lunch.png" alt="Screenshot" width="1000" height="" align=""><br><br> </p>
	</div>  
   </div><hr>
   
   <div>
   <h2 style="color:FireBrick;">6) Editing Android.mk file</h2>
   <a id="button" href="javascript:showhide('6')"><button>Show</button></a>
   <div id="6" style="display:none;"><p style="">Next you have to change name of <code >AndroidBoard.mk to Android.mk</code><img src="index_files/android.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Open Android.mk using text editor and edit is as <code >LOCAL_PATH := $(call my-dir)<br><br>ifeq ($(TARGET_DEVICE),codename)<br>include $(call all-makefiles-under,$(LOCAL_PATH))<br>endif</code> <img src="index_files/androidedit.png" alt="Screenshot" width="1000" height="" align=""><br><br></p></div>
   <hr><h2 style="color:FireBrick;">7) Create and Changing files location</h2>
   <a id="button" href="javascript:showhide('7')"><button>Show</button></a>
   <div id="7" style="display:none;"><p style="">Let's create two a folders <code >"prebuilt" and "recovery"</code>and move the <code >kernel</code> to prebuilt and then <code >recovery.fstab</code> to recovery<img src="index_files/createfolder.png" alt="Screenshot" width="1000" height="" align=""><br><br></p></div>
   <hr><h2 style="color:FireBrick;">8) Editing device_codename.mk file</h2>
   <a id="button" href="javascript:showhide('8')"><button>Show</button></a>
   <div id="8" style="display:none;"><p style="">Open <code >device_codename.mk </code> .You can see the kernel is called from device folder, but you moved it in prebuilt folder so change this from <code >LOCAL_PATH := device/brand/codename</code> to <code >LOCAL_PATH := device/brand/codename/prebuilt</code><img src="index_files/prebuilt.png" alt="Screenshot" width="1000" height="" align=""><br><br></p></div>
   <hr><h2 style="color:FireBrick;">9) Editing BoardConfig.mk file</h2>
   <a id="button" href="javascript:showhide('9')"><button>Show</button></a>
   <div id="9" style="display:none;"><p style="">Finally open <code >BoardConfig.mk</code> file.<img src="index_files/board.png" alt="Screenshot" width="1000" height="" align=""><br><br> 
    So we have to make some changes.If the mkvendor script didn't get your platform <code >TARGET_BOARD_PLATFORM := unknown</code> .Open new terminal and connect your android in adb mode type this command  <code >adb shell cat /proc/cpuinfo</code> you can see hardware block it is your platform <img src="index_files/platform.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Or you can also check this from <code >build.prop</code> which had already backup up <img src="index_files/platform2.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    After platform correctly set now set <code >Partition Sizes</code>.You can see they have'nt set <img src="index_files/partitions.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    In some devices <code >adb shell cat /proc/mtd</code> may not work.If it works Ok you can try If it does'nt then connect your android in adb mode and type in terminal <code >adb remount<br>adb shell "su" "" "mount -o remount,rw /system"<br>adb push parted /system/bin/parted<br>adb shell<br>chmod 0755 /system/bin/parted<br>parted /dev/block/mmcblk0<br>print</code> Finally you will get result of Partition Sizes.The file <code >parted</code> can be found <a href="https://mega.nz/#%21RghWgbwb%21_zBLcurAg2DiejHKyw6fwTz564a3pO3UH1mhdIKClb0"><code>Here</code></a><img src="index_files/sizes.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Now we need these partitions <code >boot,cache,recovery,userdata,system</code> in the terminal result they are in <code >Mega Bytes</code> we need to multiply them with <code >1048576</code> to convert into <code >Bytes</code> <img src="index_files/partitionsize.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Finally change the  <code >TARGET_PREBUILT_KERNEL := device/brand/codename/kernel</code> to <code >TARGET_PREBUILT_KERNEL := device/brand/codename/prebuilt/kernel</code> and save the file<img src="index_files/prebuilt2.png" alt="Screenshot" width="1000" height="" align=""><br><br></p></div>
   <hr><h2 style="color:FireBrick;">10) Start Building Recovery</h2>
   <a id="button" href="javascript:showhide('10')"><button>Show</button></a>
   <div id="10" style="display:none;"><p style="">Open a terminal and type this and initialize the building environment <code >. build/envsetup.sh</code><img src="index_files/envsetup2.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    You can see that my device is included. Next lunch device configuration <code >lunch cm_codename-eng</code><img src="index_files/lunch2.png" alt="Screenshot" width="1000" height="" align=""><br><br>
    Finally start making Recovery <code >make recoveryimage</code><img src="index_files/recoveryimage.png" alt="Screenshot" width="1000" height="" align=""><br><br></p></div>
   <hr><h2 style="color:FireBrick;">11) Some Missed Points and Tips</h2>
   <a id="button" href="javascript:showhide('11')"><button>Show</button></a>
   <div id="11" style="display:none;"><p style="">1)After completing making of recovery <code >Flash the recovery.img</code> from out folder.If it <code >Boot Sucessfully</code> then you are on right way or else check back every step in the Guide..........<br><br>
 
    2)The process is'nt complete fully there will be errors in recovery 
you need to edit the files in the tree and you also need <code >Vendor,Kernel</code> to be build for making Rom so wait for my coming Guides.......<br><br>
    3)I used term <code >brand</code> but it also can be <code >manufacturer</code> the other word <code >codename</code> is the key word for <code >device</code>.<br><br>
    4)By following this guide you'll build a <code >ClockWorkMod Recovery_(CWM)</code>.Because in Cyanogenmod default recovery is CWM....... If you want to change it the follow steps below....<br><br>
   </p></div>
   <hr><h2 style="color:FireBrick;">12) Change Recovery Variant</h2>
   <a id="button" href="javascript:showhide('12')"><button>Show</button></a>
   <div id="12" style="display:none;"><p>If you'd like to add a custom recovery then go to<code >~/repo folder/bootable</code><img src="index_files/bootable.png" alt="Screenshot" width="1000" height="" align=""><br><br>
   You can see three folders in them naming starts with <code >recovery</code> <img src="index_files/recoverys.png" alt="Screenshot" width="1000" height="" align=""><br><br>
   But a folder has been named only <code >recovery</code> so rename it as <code >recovery-cwm</code><img src="index_files/rename20recovery.png" alt="Screenshot" width="1000" height="" align=""><br><br>
   Now open <code >BoardConfig.mk</code> using any text editor and add this line <code >RECOVERY_VARIANT := #</code> in the place of # type the recovery key word.<img src="index_files/variant.png" alt="Screenshot" width="1000" height="" align=""><br><br>
   That's it you are Ready for building a new recovery variant but before making recovery make clean and clobber ........  
   </p></div>
   <hr><hr></DIV>
<div id="fullBanner468x60Ad" align="center" style="float:">
	 AD!
	</div>   
   <DIV align="center">
		<iframe src="index_files/Uw_caMHZRC4.htm" allowfullscreen="" width="1000" height="600" frameborder="0"></iframe>
   </div>
		<div id="skyscraper160x600Ad" align="center" style="float:right">
			AD!
		</div>
		<div id="mediumRectangle336x280Ad" align="center" style="float:left">
	 AD!
	</div>
		
		

	
	<div id="billBoard970x250Ad" align="center" style="float:">
	 AD!
	</div>
		
		 
	</body>
	
</html>
